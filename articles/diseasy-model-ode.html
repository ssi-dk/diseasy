<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DiseasyModelOde • diseasy</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DiseasyModelOde">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">diseasy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/diseasy.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Creating ensembles</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-ensembles.html">Creating ensembles</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Functional modules</h6></li>
    <li><a class="dropdown-item" href="../articles/diseasy-activity.html">DiseasyActivity</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-immunity.html">DiseasyImmunity</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-observables.html">DiseasyObservables</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-season.html">DiseasySeason</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-variant.html">DiseasyVariant</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model templates</h6></li>
    <li><a class="dropdown-item" href="../articles/diseasy-model-ode.html">DiseasyModelOde</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-model-regression.html">DiseasyModelRegression</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer guides</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-a-model.html">Creating a model</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model notes</h6></li>
    <li><a class="dropdown-item" href="../articles/SEIR-implementation.html">SEIR: Implementation</a></li>
    <li><a class="dropdown-item" href="../articles/SEIR-initialisation.html">SEIR: Initialising from incidence data</a></li>
    <li><a class="dropdown-item" href="../articles/SEIR-malthusian-matching.html">SEIR: Accounting for structural differences in malthusian growth rates</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional information</h6></li>
    <li><a class="dropdown-item" href="../articles/diseasy-immunity-optimisation.html">DiseasyImmunity optimisation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ssi-dk/diseasy/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>DiseasyModelOde</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ssi-dk/diseasy/blob/main/vignettes/articles/diseasy-model-ode.Rmd" class="external-link"><code>vignettes/articles/diseasy-model-ode.Rmd</code></a></small>
      <div class="d-none name"><code>diseasy-model-ode.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ssi-dk/diseasy" class="external-link">diseasy</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: diseasystore</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'diseasy'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:diseasystore':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     diseasyoption</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>One of the model families in <code>diseasy</code> is the family of
Ordinary Differential Equation (ODE) models. This family of models is
presently represented only by the <code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code>, a
model template that implements SEIR (Susceptible, Exposed, Infected,
Recovered) ODE models according to user specification. This template
allows for any number of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi><annotation encoding="application/x-tex">E</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
states in the model and interfaces with the <code><a href="../reference/DiseasySeason.html">?DiseasySeason</a></code>,
<code><a href="../reference/DiseasyActivity.html">?DiseasyActivity</a></code>, <code><a href="../reference/DiseasyVariant.html">?DiseasyVariant</a></code> and
<code><a href="../reference/DiseasyImmunity.html">?DiseasyImmunity</a></code> modules for scenario definitions.</p>
<p>The workflow for creating a specific
<code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code> model would roughly follow these
steps:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Defining the scenario.</strong> The first step to using most
models in <code>diseasy</code> is to define the scenario. That is, to
configure the functional modules that the model templates takes as
argument (e.g. <code><a href="../reference/DiseasyActivity.html">?DiseasyActivity</a></code>). These steps provide the
model template with information about the population, the activity,
variants to include etc.</li>
<li>
<strong>Choosing the model configuration.</strong> The model
template may have some configurability that you control. In the case of
<code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code> for example, you must choose the
number of consecutive
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi><annotation encoding="application/x-tex">E</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
states in the model.</li>
<li>
<strong>Mapping to observables.</strong> The ODE family of models is
in some ways bespoke in the sense that the user needs provide a mapping
from the observables to the “true” incidence of infections. The model is
then initialised from this estimated incidence. If the model should
provide predictions for observables other than the “true” incidence, the
user needs to provide mapping between the model incidence and the
observables in question.</li>
</ol>
<p>These steps are outlined in individual sections below where we work
through defining a model in a specific example. Note that this example
is contrived in the sense that the data we use in this example have been
generated with this exact model template and we therefore can match the
observations near-perfectly.</p>
</div>
<div class="section level2">
<h2 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h2>
<p>The data we will use this example is provided by
<code><a href="../reference/DiseasystoreSeirExample.html">?DiseasystoreSeirExample</a></code> which represents data in a Danish
context.</p>
<p>We first create an observables module to interface with this
data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Configure a observables module with the example data and database</span></span>
<span><span class="va">observables</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DiseasyObservables.html">DiseasyObservables</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  diseasystore <span class="op">=</span> <span class="va">DiseasystoreSeirExample</span>,</span>
<span>  conn <span class="op">=</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DBI/man/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The data is stratified by age and covers a single infection wave. It
contains three observables of interest for our example:</p>
<ul>
<li>
<em>n_infected</em>: The true number of infected in the data.</li>
<li>
<em>n_positive</em>: The observed subset of infected (65% of true
infected are observed but fewer are observed during the weekend).</li>
<li>
<em>n_admissions</em>: The number of new hospital admissions due to
infections (risk of hospitalisation dependent on age group).</li>
</ul>
<p>When running the models, we should also define at what point in time
they should provide predictions for. This is done by setting the
<code>last_queryable_date</code> in the observables module:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">last_queryable_date</span> <span class="op">&lt;-</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">min_start_date</span> <span class="op">+</span> <span class="fl">40</span></span></code></pre></div>
<p>Lets first look at the data we have available:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observables</span><span class="op">$</span><span class="fu">get_observation</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_infected"</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span>,</span>
<span>  start_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">min_start_date</span>,</span>
<span>  end_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">max_end_date</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">n_infected</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span></span>
<span>    xintercept <span class="op">=</span> <span class="va">last_queryable_date</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"deepskyblue3"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"True number of infected"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">age_group</span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/example%20data%20infected-1.png" class="r-plt" alt="Data to model: True number of infected." width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observables</span><span class="op">$</span><span class="fu">get_observation</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_positive"</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span>,</span>
<span>  start_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">min_start_date</span>,</span>
<span>  end_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">max_end_date</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">n_positive</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span></span>
<span>    xintercept <span class="op">=</span> <span class="va">last_queryable_date</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"seagreen"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Observed number of positive cases"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">age_group</span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/example%20data%20positive-1.png" class="r-plt" alt="Data to model: Number of positive cases." width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observables</span><span class="op">$</span><span class="fu">get_observation</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_admission"</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span>,</span>
<span>  start_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">min_start_date</span>,</span>
<span>  end_date <span class="op">=</span> <span class="va">observables</span><span class="op">$</span><span class="va">ds</span><span class="op">$</span><span class="va">max_end_date</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">n_admission</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span></span>
<span>    xintercept <span class="op">=</span> <span class="va">last_queryable_date</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    linetype <span class="op">=</span> <span class="st">"dashed"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"violetred3"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of admissions"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">age_group</span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/example%20data%20admission-1.png" class="r-plt" alt="Data to model: Number of hospital admissions." width="700"></p>
</div>
<div class="section level2">
<h2 id="defining-the-scenario">Defining the scenario<a class="anchor" aria-label="anchor" href="#defining-the-scenario"></a>
</h2>
<p>The first step to creating a <code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code> model
is to define the scenario. In this case, as we stated above, we can
exactly match the scenario to the data since the data was created using
this class of models.</p>
<p>First we define the activity scenario via the
<code><a href="../reference/DiseasyActivity.html">?DiseasyActivity</a></code> module. This scenario describes the
changes in activity in the society (e.g. restrictions). To see more on
how to configure this module, see
<code>vignette("diseasy-activity")</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Configure an activity module using Danish population and contact information.</span></span>
<span><span class="va">activity</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DiseasyActivity.html">DiseasyActivity</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">activity</span><span class="op">$</span><span class="fu">set_contact_basis</span><span class="op">(</span>contact_basis <span class="op">=</span> <span class="va">contact_basis</span><span class="op">$</span><span class="va">DK</span><span class="op">)</span></span>
<span><span class="va">activity</span><span class="op">$</span><span class="fu">set_activity_units</span><span class="op">(</span><span class="va">dk_activity_units</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The level of activity is fixed to the "baseline" level throughout the simulation.</span></span>
<span><span class="va">activity</span><span class="op">$</span><span class="fu">change_activity</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-01-01"</span><span class="op">)</span>, opening <span class="op">=</span> <span class="st">"baseline"</span><span class="op">)</span></span></code></pre></div>
<p>This particular scenario also include simple seasonality and waning
immunity:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Waning immunity scenario</span></span>
<span><span class="va">immunity</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DiseasyImmunity.html">DiseasyImmunity</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">immunity</span><span class="op">$</span><span class="fu">set_exponential_waning</span><span class="op">(</span>time_scale <span class="op">=</span> <span class="fl">180</span><span class="op">)</span></span>
<span><span class="co">#&gt; $infection</span></span>
<span><span class="co">#&gt; function (t) </span></span>
<span><span class="co">#&gt; exp(-t/time_scale)</span></span>
<span><span class="co">#&gt; &lt;environment: 0x5619c3bd8e08&gt;</span></span>
<span><span class="co">#&gt; attr(,"name")</span></span>
<span><span class="co">#&gt; [1] "exponential_waning"</span></span>
<span><span class="co">#&gt; attr(,"dots")</span></span>
<span><span class="co">#&gt; attr(,"dots")$time_scale</span></span>
<span><span class="co">#&gt; [1] 180</span></span>
<span></span>
<span><span class="co"># Season scenario</span></span>
<span><span class="va">season</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DiseasySeason.html">DiseasySeason</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">season</span><span class="op">$</span><span class="fu">set_reference_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">season</span><span class="op">$</span><span class="fu">use_cosine_season</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="choosing-the-model-configuration">Choosing the model configuration<a class="anchor" aria-label="anchor" href="#choosing-the-model-configuration"></a>
</h2>
<p>The <code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code> model template has a number of
hyperparameters and parameters that should be configured for the model
to run.</p>
<p>The hyperparameters are:</p>
<ul>
<li>
<em>compartment_structure</em>: A named vector specifying the number
of consecutive
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi><annotation encoding="application/x-tex">E</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
states in the model.</li>
<li>
<em>age_cuts_lower</em>: A vector of age cuts for the age groups in
the model.</li>
</ul>
<p>The parameters are:</p>
<ul>
<li>
<em>disease_progression_rates</em>: A named vector specifying the
progression rates from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>E</mi><annotation encoding="application/x-tex">E</annotation></semantics></math>
to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
and from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math>
to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
(i.e. waiting times).</li>
<li>
<em>overall_infection_risk</em>: The overall risk of infection in
the population (the overall scaling of infectivity).</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hyper parameters</span></span>
<span><span class="va">compartment_structure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E"</span> <span class="op">=</span> <span class="fl">2L</span>, <span class="st">"I"</span> <span class="op">=</span> <span class="fl">1L</span>, <span class="st">"R"</span> <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span></span>
<span><span class="va">age_cuts_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span>, <span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parameters</span></span>
<span><span class="va">disease_progression_rates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E"</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">2.1</span>, <span class="st">"I"</span> <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">4.5</span><span class="op">)</span></span>
<span><span class="va">overall_infection_risk</span> <span class="op">&lt;-</span> <span class="fl">0.025</span></span>
<span></span>
<span><span class="co"># When to predict?</span></span>
<span><span class="va">observables</span><span class="op">$</span><span class="fu">set_last_queryable_date</span><span class="op">(</span><span class="va">last_queryable_date</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mapping-observables-to-model-and-back">Mapping observables to model and back<a class="anchor" aria-label="anchor" href="#mapping-observables-to-model-and-back"></a>
</h2>
<p>Being a SEIR model, the <code><a href="../reference/DiseasyModelOdeSeir.html">?DiseasyModelOdeSeir</a></code> model
template runs the dynamics of the infections in the population. These
dynamics are inferred from the incidence of the disease in the
population. The model then predicts the evolution of the incidence<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Measured as the rate of individuals exiting the first
&lt;code&gt;I&lt;/code&gt; state.&lt;/p&gt;"><sup>1</sup></a> under the
given configuration. To get predictions for other observables, we must
map from the incidence to the observable of interest.</p>
<p>Mathematically, we map from the set of observables
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>O</mi><mo accent="true">→</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\vec{O}(t)</annotation></semantics></math>
to the incidence
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">I(t)</annotation></semantics></math>
via the map
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi><annotation encoding="application/x-tex">f</annotation></semantics></math>:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>O</mi><mo accent="true">→</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mover><mo>→</mo><mi>f</mi></mover><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\vec{O}(t) \overset{f}{\rightarrow} I(t)</annotation></semantics></math></p>
<p>From the model incidence
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>I</mi><mo accent="true">̃</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tilde{I}(t)</annotation></semantics></math>,
we then map to the observable estimates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover><mi>O</mi><mo accent="true">̃</mo></mover><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tilde{O}_i(t)</annotation></semantics></math>
via the maps
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>g</mi><mi>i</mi></msub><annotation encoding="application/x-tex">g_i</annotation></semantics></math>:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>I</mi><mo accent="true">̃</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mover><mo>→</mo><msub><mi>g</mi><mn>1</mn></msub></mover><msub><mover><mi>O</mi><mo accent="true">̃</mo></mover><mn>1</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tilde{I}(t) \overset{g_1}{\rightarrow} \tilde{O}_1(t)</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>I</mi><mo accent="true">̃</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mover><mo>→</mo><msub><mi>g</mi><mn>2</mn></msub></mover><msub><mover><mi>O</mi><mo accent="true">̃</mo></mover><mn>2</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tilde{I}(t) \overset{g_2}{\rightarrow} \tilde{O}_2(t)</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>⋮</mi><annotation encoding="application/x-tex">\vdots</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>I</mi><mo accent="true">̃</mo></mover><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mover><mo>→</mo><msub><mi>g</mi><mi>n</mi></msub></mover><msub><mover><mi>O</mi><mo accent="true">̃</mo></mover><mi>n</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\tilde{I}(t) \overset{g_n}{\rightarrow} \tilde{O}_n(t)</annotation></semantics></math></p>
<div class="section level3">
<h3 id="mapping-from-observables-to-incidence">Mapping from observables to incidence<a class="anchor" aria-label="anchor" href="#mapping-from-observables-to-incidence"></a>
</h3>
<p>For the model to be initialised, it needs an estimate of the
incidence in the population. This incidence is then used to infer the
dynamics of the disease in the population (See the article
<code>SEIR-initialisation</code> in the online documentation for more
information).</p>
<p>If an estimate of the incidence is not defined in the
<code>diseasystore</code>, or if you wish to provide your own estimate
from the observable, we can define a “synthetic observable” in the
<code>DiseasyObservables</code> module for the model to use.</p>
<p>In this example, the incidence is not defined in the
<code>diseasystore</code> and we therefore define a synthetic observable
for the incidence which maps from the number of positive cases to the
incidence. In many cases, testing data may not be reliable, and you may
want to infer the incidence from other sources such as waste water data
or admissions data.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Map observables to incidence</span></span>
<span><span class="va">observables</span><span class="op">$</span><span class="fu">define_synthetic_observable</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"incidence"</span>,</span>
<span>  mapping <span class="op">=</span> \<span class="op">(</span><span class="va">n_positive</span>, <span class="va">n_population</span><span class="op">)</span> <span class="va">n_positive</span> <span class="op">/</span> <span class="op">(</span><span class="va">n_population</span> <span class="op">*</span> <span class="fl">0.65</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="mapping-from-model-incidence-to-observables">Mapping from model incidence to observables<a class="anchor" aria-label="anchor" href="#mapping-from-model-incidence-to-observables"></a>
</h3>
<p>By default, the model can only return predictions for the true number
of infected (<code>n_infected</code>) and the incidence
(<code>incidence</code>) since these are the only observables “known” to
the model. Any additional observables must be mapped from the incidence
provided by the model.</p>
<p>To this purpose, we define a “map” and a “reduce” function: The
<em>map</em> function is passed to a <code><a href="https://dplyr.tidyverse.org/reference/group_map.html" class="external-link">dplyr::group_map()</a></code>
call on a <code>data.frame</code> grouped by the stratification. The
function should be a two-argument function where the first argument
contains a <code>data.frame</code> with columns <code>n_infected</code>
and <code>population</code> (i.e. the size of the group), and where the
second argument contains the group (as a <code>data.frame</code>). Note
that the output of this function should contain the groups provided in
the second argument.</p>
<p>The <em>reduce</em> function is passed to a
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarise()</a></code> call on the output of the map. By
default, a simple sum is used which works for all counting data. If the
observable is not a count, the user must provide a custom reduce
function. For example, the incidence is a rate and to summarise a
weighted sum must be made.</p>
<p>In this example, we define maps from the incidence to the number of
positive cases and the number of hospital admissions. These are both
counting observables and the default <em>reduce</em> function can be
used.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Maps between the internal model incidence and observables</span></span>
<span><span class="va">map_to_n_positive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"map"</span> <span class="op">=</span> \<span class="op">(</span><span class="va">.x</span>, <span class="va">.y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.y</span>, <span class="st">"n_positive"</span> <span class="op">=</span> <span class="fl">0.65</span> <span class="op">*</span> <span class="va">.x</span><span class="op">$</span><span class="va">n_infected</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">map_to_n_admission</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"map"</span> <span class="op">=</span> \<span class="op">(</span><span class="va">.x</span>, <span class="va">.y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">risk_of_admission</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"00-29"</span> <span class="op">=</span> <span class="fl">0.001</span>, <span class="st">"30-59"</span> <span class="op">=</span> <span class="fl">0.01</span>, <span class="st">"60+"</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span>    <span class="va">delay_distribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">)</span> <span class="co"># Must sum = 1</span></span>
<span></span>
<span>    <span class="va">n_total_admissions</span> <span class="op">&lt;-</span> <span class="va">.x</span><span class="op">$</span><span class="va">n_infected</span> <span class="op">*</span> <span class="va">risk_of_admission</span><span class="op">[</span><span class="va">.y</span><span class="op">$</span><span class="va">age_group</span><span class="op">]</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>      <span class="va">.y</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        <span class="st">"delay"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">delay_distribution</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>        <span class="st">"n_admission"</span> <span class="op">=</span> <span class="va">n_total_admissions</span> <span class="op">*</span> <span class="va">delay_distribution</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="st">"date"</span> <span class="op">=</span> <span class="va">.data</span><span class="op">$</span><span class="va">date</span> <span class="op">+</span> <span class="va">.data</span><span class="op">$</span><span class="va">delay</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">!</span><span class="st">"delay"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># These maps are provided via a list to the model with the names of</span></span>
<span><span class="co"># the elements denoting the observable being mapped to.</span></span>
<span><span class="va">model_output_to_observable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"n_positive"</span> <span class="op">=</span> <span class="va">map_to_n_positive</span>,</span>
<span>  <span class="st">"n_admission"</span> <span class="op">=</span> <span class="va">map_to_n_admission</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="putting-it-all-together">Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h2>
<p>With all the configuration done above, we can now create our model
instance.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DiseasyModelOdeSeir.html">DiseasyModelOdeSeir</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="co"># Scenario configuration</span></span>
<span>  activity <span class="op">=</span> <span class="va">activity</span>,</span>
<span>  immunity <span class="op">=</span> <span class="va">immunity</span>,</span>
<span>  season <span class="op">=</span> <span class="va">season</span>,</span>
<span>  observables <span class="op">=</span> <span class="va">observables</span>,</span>
<span></span>
<span>  parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Parameter and hyper-parameter configuration</span></span>
<span>    <span class="st">"compartment_structure"</span> <span class="op">=</span> <span class="va">compartment_structure</span>,</span>
<span>    <span class="st">"age_cuts_lower"</span> <span class="op">=</span> <span class="va">age_cuts_lower</span>,</span>
<span>    <span class="st">"overall_infection_risk"</span> <span class="op">=</span> <span class="va">overall_infection_risk</span>,</span>
<span>    <span class="st">"disease_progression_rates"</span> <span class="op">=</span> <span class="va">disease_progression_rates</span>,</span>
<span></span>
<span>    <span class="co"># Mapping to observables</span></span>
<span>    <span class="st">"model_output_to_observable"</span> <span class="op">=</span> <span class="va">model_output_to_observable</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="predicting-the-incidence">Predicting the incidence<a class="anchor" aria-label="anchor" href="#predicting-the-incidence"></a>
</h2>
<p>From this point, we can easily get predictions for the individual
observables.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"incidence"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   date       incidence realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13   0.001<span style="text-decoration: underline;">85</span>              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14   0.002<span style="text-decoration: underline;">04</span>              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15   0.002<span style="text-decoration: underline;">22</span>              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-16   0.002<span style="text-decoration: underline;">41</span>              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-17   0.002<span style="text-decoration: underline;">59</span>              1      1</span></span></code></pre></div>
<p>… and we can plot the predictions along with observations for the
data</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"incidence"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="Model prediction for the number of incidence - stratified by age group." width="700"></p>
<p>The results are easily stratified by the stratifications in the
data</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"incidence"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 5</span></span></span>
<span><span class="co">#&gt;   date       age_group incidence realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13 00-29      0.002<span style="text-decoration: underline;">41</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14 00-29      0.002<span style="text-decoration: underline;">66</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15 00-29      0.002<span style="text-decoration: underline;">90</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-13 30-59      0.001<span style="text-decoration: underline;">90</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-14 30-59      0.002<span style="text-decoration: underline;">10</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-02-15 30-59      0.002<span style="text-decoration: underline;">29</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2020-02-13 60+        0.000<span style="text-decoration: underline;">987</span>              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2020-02-14 60+        0.001<span style="text-decoration: underline;">09</span>               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 2020-02-15 60+        0.001<span style="text-decoration: underline;">19</span>               1      1</span></span></code></pre></div>
<p>… and we can see the plots for each strata.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"incidence"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="Model prediction for the number of incidence - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-5-2.png" class="r-plt" alt="Model prediction for the number of incidence - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-5-3.png" class="r-plt" alt="Model prediction for the number of incidence - stratified by age group." width="700"></p>
<p>This can be done for all the observables we have mapped in the
model.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_infected"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   date       n_infected realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13     <span style="text-decoration: underline;">10</span>846.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14     <span style="text-decoration: underline;">11</span>975.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15     <span style="text-decoration: underline;">13</span>057.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-16     <span style="text-decoration: underline;">14</span>124.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-17     <span style="text-decoration: underline;">15</span>221.              1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_infected"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="Model prediction for the number of infected - stratified by age group." width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_infected"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 5</span></span></span>
<span><span class="co">#&gt;   date       age_group n_infected realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13 00-29          <span style="text-decoration: underline;">5</span>043.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14 00-29          <span style="text-decoration: underline;">5</span>568.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15 00-29          <span style="text-decoration: underline;">6</span>071.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-13 30-59          <span style="text-decoration: underline;">4</span>309.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-14 30-59          <span style="text-decoration: underline;">4</span>757.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-02-15 30-59          <span style="text-decoration: underline;">5</span>187.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2020-02-13 60+            <span style="text-decoration: underline;">1</span>494.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2020-02-14 60+            <span style="text-decoration: underline;">1</span>651.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 2020-02-15 60+            <span style="text-decoration: underline;">1</span>799.              1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_infected"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="Model prediction for the number of infected - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-9-2.png" class="r-plt" alt="Model prediction for the number of infected - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-9-3.png" class="r-plt" alt="Model prediction for the number of infected - stratified by age group." width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_positive"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   date       n_positive realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13      <span style="text-decoration: underline;">7</span>050.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14      <span style="text-decoration: underline;">7</span>784.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15      <span style="text-decoration: underline;">8</span>487.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-16      <span style="text-decoration: underline;">9</span>180.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-17      <span style="text-decoration: underline;">9</span>894.              1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_positive"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-11-1.png" class="r-plt" alt="Model prediction for the number of positive." width="700"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_positive"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 5</span></span></span>
<span><span class="co">#&gt;   date       age_group n_positive realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13 00-29          <span style="text-decoration: underline;">3</span>278.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14 00-29          <span style="text-decoration: underline;">3</span>619.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15 00-29          <span style="text-decoration: underline;">3</span>946.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-13 30-59          <span style="text-decoration: underline;">2</span>801.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-14 30-59          <span style="text-decoration: underline;">3</span>092.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-02-15 30-59          <span style="text-decoration: underline;">3</span>371.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2020-02-13 60+             971.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2020-02-14 60+            <span style="text-decoration: underline;">1</span>073.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 2020-02-15 60+            <span style="text-decoration: underline;">1</span>169.              1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_positive"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-13-1.png" class="r-plt" alt="Model prediction for the number of positive - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-13-2.png" class="r-plt" alt="Model prediction for the number of positive - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-13-3.png" class="r-plt" alt="Model prediction for the number of positive - stratified by age group." width="700"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_admission"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   date       n_admission realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13        145.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14        169.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15        185.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-16        199.              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-17        211.              1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_admission"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="Model prediction for the number of hospital admissions." width="700"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  observable <span class="op">=</span> <span class="st">"n_admission"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 5</span></span></span>
<span><span class="co">#&gt;   date       age_group n_admission realisation_id weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-02-13 00-29            3.76              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-02-14 00-29            4.35              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-02-15 00-29            4.71              1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-02-13 30-59           32.0               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-02-14 30-59           37.0               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-02-15 30-59           40.2               1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2020-02-13 60+            110.                1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2020-02-14 60+            128.                1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 2020-02-15 60+            140.                1      1</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  observable <span class="op">=</span> <span class="st">"n_admission"</span>,</span>
<span>  prediction_length <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  stratification <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">quos</a></span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-17-1.png" class="r-plt" alt="Model prediction for the number of hospital admissions - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-17-2.png" class="r-plt" alt="Model prediction for the number of hospital admissions - stratified by age group." width="700"><img src="diseasy-model-ode_files/figure-html/unnamed-chunk-17-3.png" class="r-plt" alt="Model prediction for the number of hospital admissions - stratified by age group." width="700"></p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rasmus Skytte Randløv, Lasse Engbo Christiansen, Kaare Græsbøll, Sofia Myrup Otero, Marcus Munch Grünewald, <a href="https://www.ssi.dk/" class="external-link"><img src="https://www.ssi.dk/assets/images/ssi-logo-optimeret.svg" alt="SSI" height="64" style="margin-bottom: 0.5em; margin-top: 1.5em;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
